webpackJsonp([1],{116:function(e,t){},117:function(e,t){},118:function(e,t){},124:function(e,t,a){a(118);var n=a(28)(a(75),a(128),null,null);e.exports=n.exports},125:function(e,t,a){a(116);var n=a(28)(a(76),a(126),"data-v-0761e65c",null);e.exports=n.exports},126:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Game")],1)},staticRenderFns:[]}},127:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"1%"},attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},128:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-bottom":"5%"},attrs:{id:"gameScreen"}},[a("md-layout",{staticStyle:{padding:"2%","padding-top":"0px"},attrs:{flex:"100"}},[a("md-layout",{attrs:{flex:"100"}},[a("md-input-container",[a("label",[e._v("HERO")]),e._v(" "),a("md-input",{attrs:{readonly:e.isFindingAvatar},model:{value:e.hero,callback:function(t){e.hero=t},expression:"hero"}})],1)],1),e._v(" "),a("md-layout",{attrs:{"md-align":"center"}},[a("md-button",{staticClass:"md-raised md-primary large-button",attrs:{disabled:e.isFindingAvatar||!e.hero||!e.enemy},nativeOn:{click:function(t){e.find(t)}}},[e._v("\n        "+e._s(e.isFindingAvatar?"Battle in progress":"Start Battle")+"\n      ")]),e._v(" "),a("md-button",{staticClass:"md-raised md-primary large-button",attrs:{disabled:e.isFindingAvatar||!e.hero},nativeOn:{click:function(t){e.findFriends(t)}}},[e._v("\n        Find friends\n      ")])],1),e._v(" "),a("md-layout",[a("md-input-container",{attrs:{flex:"100"}},[a("label",[e._v("ENEMY")]),e._v(" "),a("md-input",{attrs:{readonly:e.isFindingAvatar},model:{value:e.enemy,callback:function(t){e.enemy=t},expression:"enemy"}})],1)],1)],1),e._v(" "),e.isFindingAvatar?e._e():a("carousel",e._l(e.friends,function(t){return a("slide",{key:t.login,staticStyle:{"padding-left":"2%"}},[a("img",{staticStyle:{"border-radius":"50%",width:"15%"},attrs:{src:t.image,alt:"item.login",title:t.login},on:{click:function(a){e.enemy=t.login}}})])})),e._v(" "),a("md-dialog-alert",{ref:"dialogUserNotFound",attrs:{"md-content":e.alert.content,"md-ok-text":e.alert.ok},on:{open:e.onOpen,close:e.onClose}})],1)},staticRenderFns:[]}},52:function(e,t,a){"use strict";var n=a(9),i=a(130),r=a(125),o=a.n(r);n.default.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Hello",component:o.a}]})},53:function(e,t,a){a(117);var n=a(28)(a(74),a(127),null,null);e.exports=n.exports},72:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(9),i=a(53),r=a.n(i),o=a(52);n.default.config.productionTip=!1,new n.default({el:"#app",router:o.a,template:"<App/>",components:{App:r.a}})},73:function(e,t){t.calculate=function(e){function t(){return 0===c.organizations?1:c.organizations>=5?5:c.organizations}function a(){return c.stars>1e3?1e3:c.stars}function n(){return c.following>1e3?1e3:c.following}function i(){return s.stars>=4?s.stars/2:1}function r(){return s.forks>=4?s.forks/2:1}function o(){return 0===s.repositories.relevants.length?1:s.repositories.relevants.length}var s=e.repository,h=e.currentStreak,c=e.information,l=function(){return(c.commits+h)*c.commitsAverage+(c.followers+n()+a())}(),m=function(){return(c.commits+h)*c.commitsAverage}(),u=function(){return(r()+i()+s.repositories.full.length+c.commits)*o()+2*c.commits}(),d=function(){return(r()+c.followers+n()+i()+s.repositories.full.length)*o()+c.commits*c.commitsAverage}(),f=function(){return(c.commits+h)*t()}(),g=function(){return(c.commits+h+c.followers+n())*t()}(),p=function(){return(c.followers+n())*(t()*c.commitsAverage*o())+c.commits+h}(),v=function(){return c.commits*c.commitsAverage}();return{HP:parseInt(l),MP:parseInt(m),P_ATCK:parseInt(u),P_DEF:parseInt(d),SPEED:parseInt(f),CRITICAL:parseInt(g),ACCURACY:parseInt(p),STAMINA:parseInt(v)}}},74:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},75:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(80),i=a.n(n),r=a(79),o=a.n(r),s=a(29),h=(a.n(s),a(31)),c=(a.n(h),a(30)),l=a.n(c),m=a(54),u=a.n(m),d=a(9),f=a(129),g=a.n(f),p=a(73),v=a.n(p),y=a(123),A=a.n(y);d.default.use(A.a),d.default.use(g.a),t.default={name:"game",props:{width:{default:900,type:Number},height:{default:710,type:Number}},mounted:function(){var e=this;null===this.game&&(this.game=new l.a.Game(this.width,this.height,l.a.AUTO,this.$el,{preload:function(){e.preload(this)},create:function(){e.create(this)},update:function(){e.update(this)}}))},methods:{openDialog:function(e){this.$refs[e].open()},closeDialog:function(e){this.$refs[e].close()},onOpen:function(){console.log("Opened")},onClose:function(e){console.log("Closed",e)},findFriends:function(){var e=this;u.a.get("/api/friends?username="+this.hero).then(function(t){e.friends=t.data.map(function(e){return{login:e.login,image:e.avatar_url}})}).catch(function(e){console.log(e)})},animateBaseHero:function(e){var t=this.heroChar.animations.add("walk",e,10,!0);t.enableUpdate=!0,t.onUpdate.add(this.onHeroUpdate,this),this.heroChar.animations.play("walk",this.calculateSpeed().hero,!0)},animateBaseEnemy:function(e){var t=this.enemyChar.animations.add("walk",e,10,!0);t.enableUpdate=!0,t.onUpdate.add(this.onEnemyUpdate,this),this.enemyChar.animations.play("walk",this.calculateSpeed().enemy,!0)},calculateSpeed:function(){var e=this.heroAvatar.SPEED,t=this.enemyAvatar.SPEED;return{hero:e>t?5:4,enemy:t>e?5:4}},getHeroCharByLanguage:function(e){var t=this,a={java:function(){t.createHeroAnimatioBase({scale:1,width:t.width-750,height:t.height-400,frameImage:"enemy-tanker-java"}),t.animateBaseHero(t.getJavaFrame())},"c#":function(){t.createHeroAnimatioBase({scale:-1,width:t.width-370,height:t.height-180,frameImage:"enemy-atacker-c#"}),t.animateBaseHero(t.getCSharpFrame())},javascript:function(){t.createHeroAnimatioBase({scale:-1,width:t.width-460,height:t.height-255,frameImage:"hero-archer-javascript"}),t.animateBaseHero(t.getJavaScriptFrame())}},n=function(){t.createHeroAnimatioBase({scale:-1,width:t.width-460,height:t.height-178,frameImage:"hero-other"}),t.animateBaseHero(t.getOtherFrame())};return(a[e.toLocaleLowerCase()]||n)()},getEnemyCharByLanguage:function(e){var t=this,a={java:function(){t.createEnemyAnimatioBase({scale:-1,width:t.width-150,height:t.height-400,frameImage:"enemy-tanker-java"}),t.animateBaseEnemy(t.getJavaFrame())},"c#":function(){t.createEnemyAnimatioBase({scale:1,width:t.width-530,height:t.height-180,frameImage:"enemy-atacker-c#"}),t.animateBaseEnemy(t.getCSharpFrame())},javascript:function(){t.createEnemyAnimatioBase({scale:1,width:t.width-460,height:t.height-255,frameImage:"hero-archer-javascript"}),t.animateBaseEnemy(t.getJavaScriptFrame())}},n=function(){t.createEnemyAnimatioBase({scale:1,width:t.width-460,height:t.height-178,frameImage:"hero-other"}),t.animateBaseEnemy(t.getOtherFrame())};return(a[e.toLocaleLowerCase()]||n)()},getJavaFrame:function(){return[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]},getCSharpFrame:function(){return[2,8,11,12,13,15,16,17,18,19,23,24,25,26,27,28,29,30,31,35,36,37,38]},getJavaScriptFrame:function(){return[16,17,18,19,20,29,30,29,30,31,21,22,23,24,25,26,27,36,37,38,39,40,41]},getOtherFrame:function(){return[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]},createHeroAnimatioBase:function(e){console.log("frame image hero",e.frameImage),this.heroChar=this.game.add.sprite(e.width,e.height,e.frameImage),this.heroChar.scale.x*=e.scale},createEnemyAnimatioBase:function(e){console.log("frame image enemy",e.frameImage),this.enemyChar=this.game.add.sprite(e.width,e.height,e.frameImage),this.enemyChar.scale.x*=e.scale},punchHeroFrame:function(e){return this.frameMovement(this.heroApiResult,e)},punchEnemyFrame:function(e){return this.frameMovement(this.enemyApiResult,e)},frameMovement:function(e,t){var a={java:function(){return 10===t.index||24===t.index},"c#":function(){return 15===t.index||37===t.index},javascript:function(){return 39===t.index||40===t.index}},n=function(){return 12===t.index||26===t.index};return(a[e.repository.language.toLocaleLowerCase()]||n)()},isTrueBattle:function(){return(this.heroAvatar||!1)&&(this.heroAvatar.HP||!1)&&this.isBattle},cleanBattle:function(){this.cleanBar(),this.enemyChar&&this.enemyChar.destroy(),this.heroChar&&this.heroChar.destroy(),this.heroName&&this.heroName.destroy(),this.enemyName&&this.enemyName.destroy()},preload:function(){this.game.load.spritesheet("hero-tanker-java","static/game/char/tanker-385x318.png",385,318,27),this.game.load.spritesheet("enemy-tanker-java","static/game/char/tanker-385x318.png",385,318,27),this.game.load.spritesheet("hero-atacker-c#","static/game/char/paladin-249x100.png",249,100,39),this.game.load.spritesheet("enemy-atacker-c#","static/game/char/paladin-249x100.png",249,100,39),this.game.load.spritesheet("hero-archer-javascript","static/game/char/archer-158x173.png",158,173,46),this.game.load.spritesheet("enemy-archer-javascript","static/game/char/archer-158x173.png",158,173,46),this.game.load.spritesheet("enemy-other","static/game/char/wizard-161x106.png",161,106,36),this.game.load.spritesheet("hero-other","static/game/char/wizard-161x106.png",161,106,36),this.game.load.image("background","static/game/img/background.v1.png")},create:function(e){this.game.add.tileSprite(5,5,1300,700,"background")},update:function(e){},onHeroUpdate:function(e,t){this.heroName.text=this.hero,this.enemyName.text=this.enemy,this.isTrueBattle()&&this.punchHeroFrame(t)&&(console.log("hero punch",t.index),this.createHeroBattle(),this.updateAvatarBar())},onEnemyUpdate:function(e,t){this.heroName.text=this.hero,this.enemyName.text=this.enemy,this.isTrueBattle()&&this.punchEnemyFrame(t)&&(console.log("enemy punch",t.index),this.createEnemyBattle(),this.updateAvatarBar())},createHeroBattle:function(){this.enemyAvatar.HP-=this.createBattleSystem(this.heroAvatar),this.verifyWinner()},createEnemyBattle:function(){this.heroAvatar.HP-=this.createBattleSystem(this.enemyAvatar),this.verifyWinner()},createBattleSystem:function(e){var t=Math.floor(e.P_DEF/100),a=Math.round(e.ACCURACY/100),n=Math.round(e.STAMINA/100),i=Math.floor(100001*Math.random())<e.CRITICAL?2:1;return(Math.floor(e.P_ATCK/100)+t+Math.round(a+n/2))*i},verifyWinner:function(){this.enemyAvatar.HP<=0&&this.isBattle?(this.isBattle=!1,this.enemyAvatar.HP=0,this.isFindingAvatar=!1,this.heroAvatar.HP<=0&&(this.heroAvatar.HP=0),this.pauseBattle()):this.heroAvatar.HP<=0&&this.isBattle?(this.isBattle=!1,this.heroAvatar.HP=0,this.isFindingAvatar=!1,this.enemyAvatar.HP<=0&&(this.enemyAvatar.HP=0),this.pauseBattle()):this.isBattle=!0},pauseBattle:function(){this.heroChar.animations.paused=!0,this.enemyChar.animations.paused=!0},cleanBar:function(){this.heroText&&this.heroText.destroy(),this.enemyText&&this.enemyText.destroy()},updateAvatarBar:function(){this.cleanBar(),this.heroText=this.game.add.text(32,100,"heroAvatar",{font:"20px Arial",fill:"#FFE848"}),this.heroText.text="HP: "+this.heroAvatar.HP+"\nMP: "+this.heroAvatar.MP+"\nP. ATCK: "+this.heroAvatar.P_ATCK+"\nP. DEF: "+this.heroAvatar.P_DEF+"\nSPEED: "+this.heroAvatar.SPEED+"\nCRITICAL: "+this.heroAvatar.CRITICAL+"\nACCURACY: "+this.heroAvatar.ACCURACY+"\nSTAMINA: "+this.heroAvatar.STAMINA,this.enemyText=this.game.add.text(this.width-210,100,"enemyAvatar",{font:"20px Arial",fill:"#FFE848"}),this.enemyText.text="HP: "+this.enemyAvatar.HP+"\nMP: "+this.enemyAvatar.MP+"\nP. ATCK: "+this.enemyAvatar.P_ATCK+"\nP. DEF: "+this.enemyAvatar.P_DEF+"\nSPEED: "+this.enemyAvatar.SPEED+"\nCRITICAL: "+this.enemyAvatar.CRITICAL+"\nACCURACY: "+this.enemyAvatar.ACCURACY+"\nSTAMINA: "+this.enemyAvatar.STAMINA},dealingWithLocale:function(e){var t=[],a=0;return e.forEach(function(e,n){var i=e.date,r=e.commit;new Date(e.date.replace("-","/")).getTime()<=(new Date).getTime()&&(r>0&&(a>0||0===t.length)?t.push({date:i,commit:r}):t=[]),a=e.commit}),t.length},find:function(){var e=this;this.cleanBattle(),this.heroName=this.game.add.text(200,32,null,{font:"32px Arial",fill:"#FFE848"}),this.enemyName=this.game.add.text(this.width-400,32,null,{font:"32px Arial",fill:"#FFE848"}),this.isFindingAvatar=!0;var t=u.a.get("/api/repository/format?username="+this.hero).then(function(e){return e.data}).catch(function(t){e.alert.content='Hero "'+e.hero+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1,e.hero=null}),a=u.a.get("/api/repository/format?username="+this.enemy).then(function(e){return e.data}).catch(function(t){e.alert.content='Enemy "'+e.enemy+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1}),n=u.a.get("/api/user/full?username="+this.hero).then(function(e){return e.data}).catch(function(t){e.alert.content='Hero "'+e.hero+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1,e.hero=null}),r=u.a.get("/api/user/full?username="+this.enemy).then(function(e){return e.data}).catch(function(t){e.alert.content='Enemy "'+e.enemy+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1}),s=u.a.get("/api/streak/full?username="+this.hero).then(function(t){return e.dealingWithLocale(t.data)}).catch(function(t){e.alert.content='Hero "'+e.hero+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1,e.hero=null}),h=u.a.get("/api/streak/full?username="+this.enemy).then(function(t){return e.dealingWithLocale(t.data)}).catch(function(t){e.alert.content='Enemy "'+e.enemy+'" not found.',e.openDialog("dialogUserNotFound"),e.isFindingAvatar=!1});o.a.all([t,n,s,a,r,h]).then(function(t){var a=i()(t,6),n=a[0],r=a[1],o=a[2],s=a[3],h=a[4],c=a[5],l={repository:n,information:r,currentStreak:o};e.heroApiResult=l;var m={repository:s,information:h,currentStreak:c};e.enemyApiResult=m,e.heroAvatar=v.a.calculate(l),e.enemyAvatar=v.a.calculate(m),e.getHeroCharByLanguage(n.language),e.getEnemyCharByLanguage(s.language),e.isBattle=!0,e.updateAvatarBar()})}},destroyed:function(){this.game.destroy()},data:function(){return{game:null,heroName:null,enemyName:null,heroAvatar:null,enemyAvatar:null,hero:"",enemy:"",heroText:null,enemyText:null,isBattle:!1,isFindingAvatar:!1,heroChar:null,enemyChar:null,heroApiResult:null,enemyApiResult:null,friends:null,alert:{content:"inital",ok:"Close"}}},watch:{view:function(e){var t=this;this.$nextTick(function(){t.game.update()})}}}},76:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(124),i=a.n(n);t.default={name:"hello",components:{Game:i.a},data:function(){return{}}}}},[72]);
//# sourceMappingURL=app.f3cae38e3c61366b2158.js.map